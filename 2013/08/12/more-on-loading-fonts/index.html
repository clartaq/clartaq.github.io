<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.49.2" />

  <title>More on Loading Fonts &middot; Yo-Dave</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://yo-dave.com/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://yo-dave.com/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://yo-dave.com/css/clajburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css"> 
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet"> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/clojure.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/dos.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://yo-dave.com/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <a class="pure-menu-heading" href="https://yo-dave.com/">Yo-Dave</a>
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/about/about"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/contact/contact"><i class='fa fa-phone fa-fw'></i>Contact</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href=""></a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/clartaq" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://bitbucket.org/David_Clark" target="_blank"><i class="fa fa-bitbucket-square fa-fw"></i>Bitbucket</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://stackoverflow.com/users/193509" target="_blank"><i class="fa fa-stack-overflow fa-fw"></i>Stack Overflow</a>
    </li>
    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2011-2018, David D. Clark. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Clajburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>More on Loading Fonts</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>12 Aug 2013 12:00:00 AM</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://yo-dave.com/tags/clojure">clojure</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://yo-dave.com/tags/javafx">javafx</a>
    
  </div>
  
  

</div>

  <p>A couple days ago, I <a href="https://yo-dave.com/2013/08/10/loading-fonts-like-css/">posted a little snippet</a> showing how to load and font from a list of preferred fonts using <a href="http://clojure.org/">Clojure</a> and <a href="http://www.oracle.com/technetwork/java/javafx/overview/index.html">JavaFX</a>. Well, I&rsquo;ve extended the demo a bit to show how to load both fonts installed on the OS <em>and</em> fonts from a resource file.</p>

<p>Here&rsquo;s the new snippet.</p>

<pre><code class="language-clojure">    (ns clojure_font_loading.core
      (:gen-class
       :extends javafx.application.Application)
      (:import
       [javafx.application Application]
       [javafx.event EventHandler]
       [javafx.scene Scene]
       [avafx.scene.control Button]
       [javafx.scene.layout StackPane  VBox]
       [javafx.scene.text Font])
      (:require [clojure.java.io :as jio]))
    
    (defn- get-pref
      &quot;Return the first name from prefs that appears in the
       list of font families.&quot;
      [prefs families]
      (first (reverse (reduce (fn [result item]
                                (if (.contains families item)
                                  (cons item result)
                                  result))
                              () prefs))))
    
    (defn- pref-typeface
      &quot;Return the typeface to be used at run time. Select the
       typeface from a group of pre-defined font families.&quot;
      []
      (let [prefs '(&quot;Fantasy&quot; &quot;Not Real&quot; &quot;Segoe UI&quot; &quot;Verdana&quot;
                    &quot;Trebuchet MS&quot; &quot;Tahoma&quot; &quot;Arial&quot; &quot;Helvetica&quot;
                    &quot;sans-serif&quot; &quot;System&quot;)
            families (Font/getFamilies)]
        (get-pref prefs families)))
    
    (defn- get-font-from-resource
      &quot;Load the named font from a resource.&quot;
      [font-name]
      (let [prefix &quot;clojure_font_loading/resources/&quot;
            url (jio/resource (str prefix font-name))
            fnt (Font/loadFont (.toExternalForm url) 20.0)]
        fnt))
    
    (defn -start
      &quot;Build the application interface and start it up.&quot;
      [this stage]
      (let [root (StackPane.)
            vbox (VBox.)
            scene (Scene. root 600 400)
            fnt1 (Font. (pref-typeface) 16)
            fnt2 (get-font-from-resource &quot;ITCBLKAD.TTF&quot;)
            btn1 (Button. &quot;Click to load Installed font&quot;)
            btn2 (Button. &quot;Click to load from Resource&quot;)]
    
        (.setOnAction btn1
                     (reify EventHandler
                       (handle [this event]
                         (doto btn1
                           (.setText (str &quot;This is &quot; (.getName fnt1)
                                          &quot; loaded from an installed font&quot;))
                           (.setFont fnt1)))))
    
         (.setOnAction btn2
                      (reify EventHandler
                        (handle [this event]
                          (doto btn2
                            (.setText (str &quot;This is &quot; (.getName fnt2)
                                           &quot; loaded from a font file&quot;))
                            (.setFont fnt2)))))
    
        (.setSpacing vbox 10.0)
    
        (doto (.getChildren vbox)
          (.add btn1)
          (.add btn2))
    
        (.add (.getChildren root) vbox)
    
        (doto stage
          (.setTitle &quot;Font Loading Demo&quot;)
          (.setScene scene)
          (.show))))
    
    (defn -main
      [&amp; args]
      (Application/launch clojure_font_loading.core args))
</code></pre>

<p>Here&rsquo;s the project file.</p>

<pre><code class="language-clojure">    (defproject clojure_font_loading &quot;0.1.0-SNAPSHOT&quot;
      :description &quot;Demonstration of loading fonts in Clojure and JavaFX&quot;
      :url &quot;https://bitbucket.org/David_Clark/clojure-font-loading&quot;
      :license {:name &quot;Eclipse Public License&quot;
                :url &quot;http://www.eclipse.org/legal/epl-v10.html&quot;}
      :dependencies [[org.clojure/clojure &quot;1.5.1&quot;]]
      :resource-paths [&quot;c:\\Program Files\\Java\\jdk1.7.0_25\\jre\\lib\\jfxrt.jar&quot;]
      :aot [clojure_font_loading.core]
      :main clojure_font_loading.core)
</code></pre>

<p>I&rsquo;ve put this in a <a href="https://bitbucket.org/David_Clark/clojure-font-loading">repository</a> at BitBucket if you&rsquo;re interested. Note that you will have to create a sub-directory off of the <code>src/clojure_font_loading/</code> directory called <code>resources</code>. Then copy a font file of your choice into that directory. Then you will need to change the name of the font file in the source. (I did this because of fears of putting someone&rsquo;s copyrighted material into the repository. Don&rsquo;t want to do that.)</p>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://yo-dave.com/2013/08/10/loading-fonts-like-css/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://yo-dave.com/2013/08/10/loading-fonts-like-css/">Loading Fonts Like CSS</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://yo-dave.com/2013/12/29/javafx-still-not-ready/">JavaFX Still Not Ready?</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://yo-dave.com/2013/12/29/javafx-still-not-ready/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="https://yo-dave.com/js/ui.js"></script>






</body>
</html>

