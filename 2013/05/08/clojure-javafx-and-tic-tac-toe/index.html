<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.62.1" />

  <title>Clojure, JavaFX and Tic-Tac-Toe &middot; Yo-Dave</title>

    

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://yo-dave.com/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://yo-dave.com/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://yo-dave.com/css/blackburn.css">

  
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/clojure.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/dos.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://yo-dave.com/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/about/about"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/contact/contact"><i class='fa fa-phone fa-fw'></i>Contact</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href=""></a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/clartaq" rel="me" target="_blank"><i class="fab fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://bitbucket.org/David_Clark" rel="me" target="_blank"><i class="fab fa-bitbucket"></i>Bitbucket</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://stackoverflow.com/users/193509" rel="me" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>Stack Overflow</a>
    </li>
    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2011-2020, David D. Clark. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Clojure, JavaFX and Tic-Tac-Toe</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>8 May 2013 5:20:37 PM</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://yo-dave.com/tags/clojure">clojure</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://yo-dave.com/tags/javafx">javafx</a>
    
  </div>
  
  

</div>

  <p>Recently, I have been experimenting with <a href="http://www.oracle.com/technetwork/java/javafx/overview/index.html" title="Link to JavaFX developer">JavaFX</a> in <a href="http://clojure.org/" title="Link to the Clojure language home page.">Clojure</a>. Initially, in one of my experiments, I wanted to learn how to re-size a game-board interface as it's containing window was re-sized. In the past I've had medical device interfaces that draw a representation of a physical device and these drawings must re-size as their window is re-sized. The <a href="https://clartaq.github.io/yo-dave/2013/02/18/2013-02-18-re-sizing-an-interface-in-javafx-and-clojure/">initial experiment</a> was with a simple interface for Tic-Tac-Toe. Since I had such a nice interface, I thought, why not program the complete game.</p>
<p>Well, it's done. The code is <a href="https://bitbucket.org/David_Clark/tic-tac-toe">here</a>. It's unbeatable. If you happen to win, it's a bug.</p>
<p><a href="https://yo-dave.com/static/img/2013-05-08-PlaySnip.png"><img src="https://yo-dave.com/static/img/2013-05-08-PlaySnip.png" alt="An In-Progress Tic-Tac-Toe Game"><!-- raw HTML omitted --><!-- raw HTML omitted -->An in-progress Tic-Tac-Toe game<!-- raw HTML omitted --></a></p>
<p>The key to re-sizing is to watch the width and height properties of the window containing the board and attach change listeners to the properties. The relevant code from the program:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">    ...
    (doto (<span style="color:#a6e22e">.widthProperty</span> canvas)
      (<span style="color:#a6e22e">.bind</span> (<span style="color:#a6e22e">.widthProperty</span> center))
      (<span style="color:#a6e22e">.addListener</span>
        (proxy [ChangeListener] []
          (<span style="color:#a6e22e">changed</span> [ov old-state new-state]
            (<span style="color:#a6e22e">redraw-board</span> canvas)))))
    (doto (<span style="color:#a6e22e">.heightProperty</span> canvas)
      (<span style="color:#a6e22e">.bind</span> (<span style="color:#a6e22e">.heightProperty</span> center))
      (<span style="color:#a6e22e">.addListener</span>
        (proxy [ChangeListener] []
          (<span style="color:#a6e22e">changed</span> [ov old-state new-state]
            (<span style="color:#a6e22e">redraw-board</span> canvas)))))
    ...
</code></pre></div><p>Every time the canvas is re-sized, the <code>redraw-board</code> function is called. That function takes care of calculating the new size of the board and symbols, then draws them.</p>
<p>Another feature of JavaFX is the ability to style the interface elements. Since flat interfaces are all the rage now, I thought I would play with that too. This aspect of JavaFX still feels a little unfinished in that some styling can be accomplished programmatically while other styles can only be done with CSS. For example, note the &ldquo;Reset&rdquo; button in the screen capture above. You can set some of the style directly in the program. To get all of the behavior you want for the button, such as mouse-over handling, you have to use a CSS file. Here's the file I used for the program.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">    <span style="color:#75715e">/********************************************************************************
</span><span style="color:#75715e">    *                                                                               *
</span><span style="color:#75715e">    * Push Button - Styles stolen from Pedro Duque Vieira a.k.a. &#34;Pixel Duke&#34;.      *
</span><span style="color:#75715e">    * See his post at                                                               *
</span><span style="color:#75715e">    * http://pixelduke.wordpress.com/2012/10/23/jmetro-windows-8-controls-on-java/  *
</span><span style="color:#75715e">    *                                                                               *
</span><span style="color:#75715e">    ********************************************************************************/</span>

    .<span style="color:#a6e22e">root</span> {
        <span style="color:#960050;background-color:#1e0010">-</span>fx-background-color: <span style="color:#ae81ff">#fafad2</span>;
    }

    .<span style="color:#a6e22e">button</span> {
        <span style="color:#960050;background-color:#1e0010">-</span>fx-padding: <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">22</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">22</span>;
        <span style="color:#960050;background-color:#1e0010">-</span>fx-border-style: null;
        <span style="color:#960050;background-color:#1e0010">-</span>fx-background-radius: <span style="color:#ae81ff">0</span>;
    
        <span style="color:#960050;background-color:#1e0010">-</span>fx-background-color: <span style="color:#ae81ff">#cccccc</span>;
    
        <span style="color:#960050;background-color:#1e0010">-</span>fx-font-family: <span style="color:#e6db74">&#34;Segoe UI&#34;</span>, Helvetica, Arial, <span style="color:#66d9ef">sans-serif</span>;
        <span style="color:#960050;background-color:#1e0010">-</span>fx-font-size: <span style="color:#ae81ff">11</span><span style="color:#66d9ef">pt</span>;
        <span style="color:#960050;background-color:#1e0010">-</span>fx-text-fill: <span style="color:#66d9ef">black</span>;
    }

    .<span style="color:#a6e22e">button</span>:<span style="color:#a6e22e">hover</span> {
        <span style="color:#960050;background-color:#1e0010">-</span>fx-background-color: <span style="color:#ae81ff">#d8d8d8</span>;
    }

    .<span style="color:#a6e22e">button</span>:<span style="color:#a6e22e">pressed</span><span style="color:#f92672">,</span> .<span style="color:#a6e22e">button</span>:<span style="color:#a6e22e">default</span>:<span style="color:#a6e22e">hover</span>:<span style="color:#a6e22e">pressed</span> {
        <span style="color:#960050;background-color:#1e0010">-</span>fx-background-color: <span style="color:#66d9ef">black</span>;
        <span style="color:#960050;background-color:#1e0010">-</span>fx-text-fill: <span style="color:#66d9ef">white</span>;
    }
    
    .<span style="color:#a6e22e">button</span>:<span style="color:#a6e22e">focused</span> {
        <span style="color:#960050;background-color:#1e0010">-</span>fx-border-color: <span style="color:#66d9ef">black</span>;
        <span style="color:#960050;background-color:#1e0010">-</span>fx-border-width: <span style="color:#ae81ff">1</span>;
        <span style="color:#960050;background-color:#1e0010">-</span>fx-border-style: <span style="color:#a6e22e">segments</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>);
        <span style="color:#960050;background-color:#1e0010">-</span>fx-background-insets: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>;
    }

    .<span style="color:#a6e22e">button</span>:<span style="color:#a6e22e">disabled</span><span style="color:#f92672">,</span> .<span style="color:#a6e22e">button</span>:<span style="color:#a6e22e">default</span>:<span style="color:#a6e22e">disabled</span> {
        <span style="color:#960050;background-color:#1e0010">-</span>fx-opacity: <span style="color:#ae81ff">0.4</span>;
        <span style="color:#960050;background-color:#1e0010">-</span>fx-background-color: <span style="color:#ae81ff">#cccccc</span>;
        <span style="color:#960050;background-color:#1e0010">-</span>fx-text-fill: <span style="color:#ae81ff">#212121</span>;
    }
    
    .<span style="color:#a6e22e">button</span>:<span style="color:#a6e22e">default</span> {
        <span style="color:#960050;background-color:#1e0010">-</span>fx-background-color: <span style="color:#ae81ff">#40e0d0</span>;
        <span style="color:#960050;background-color:#1e0010">-</span>fx-text-fill: <span style="color:#ae81ff">#ffffff</span>;
    }
    
    .<span style="color:#a6e22e">button</span>:<span style="color:#a6e22e">default</span>:<span style="color:#a6e22e">hover</span> {
        <span style="color:#960050;background-color:#1e0010">-</span>fx-background-color: <span style="color:#ae81ff">#48d1cc</span>;
    }
</code></pre></div><p>I've<a href="https://yo-dave.com/2013/05/08/styled-dialogs-in-javafx-with-jfxtras-monologfx/"> already written</a> about achieving similarly styled dialogs in <a href="https://blogs.oracle.com/javajungle/entry/monologfx_floss_javafx_dialogs_for" title="Link to MonologFX introduction blog.">MonologFX</a>.</p>
<p>One of the nice things about writing a program like this in Clojure is the way listener-type methods can be written. This program has a few. Some <code>ChangeListener</code>s were shown above. There are also a couple of <code>EventListener</code>s for button clicks. In fact, most of the game play occurs in the method that listens for player clicks on the game board.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">    ...
    (<span style="color:#66d9ef">defn </span>canvas-click-handler
      <span style="color:#e6db74">&#34;Handle a click on the board canvas. If the click is within the bounds of the
</span><span style="color:#e6db74">       board, interpret it as an attempt by the human player to place a symbol on
</span><span style="color:#e6db74">       the board. If the click is on an empty position, place the symbol and get
</span><span style="color:#e6db74">       the computer&#39;s response. If the game is over after either the human or
</span><span style="color:#e6db74">       computer plays, declare the winner or draw and offer to start a new game.&#34;</span>
      [canvas]
      (<span style="color:#a6e22e">reify</span> EventHandler
        (<span style="color:#a6e22e">handle</span> [this event]
          (<span style="color:#66d9ef">let </span>[x (<span style="color:#a6e22e">.getSceneX</span> event)
                y (<span style="color:#a6e22e">.getSceneY</span> event)]
            (<span style="color:#66d9ef">if </span>(<span style="color:#a6e22e">click-is-in-bounds?</span> x y)
              (<span style="color:#66d9ef">let </span>[pos (<span style="color:#a6e22e">click-pos-</span><span style="color:#f92672">&amp;</span>gt<span style="color:#75715e">;board-pos x y)]</span>
                (when (<span style="color:#a6e22e">square-is-empty?</span> <span style="color:#f92672">@</span>position pos)
                  (<span style="color:#a6e22e">fill-square</span> pos <span style="color:#f92672">@</span>me)
                  (<span style="color:#a6e22e">redraw-board</span> canvas)
                  (<span style="color:#66d9ef">if </span>(<span style="color:#a6e22e">logic/game-is-over?</span> <span style="color:#f92672">@</span>position)
                    (<span style="color:#a6e22e">declare-winner</span> canvas)
                    (<span style="color:#66d9ef">let </span>[square (<span style="color:#a6e22e">get-opponent-move</span> <span style="color:#f92672">@</span>position <span style="color:#f92672">@</span>me)]
                      (<span style="color:#a6e22e">fill-square</span> square (<span style="color:#a6e22e">logic/opponent</span> <span style="color:#f92672">@</span>me))
                      (<span style="color:#a6e22e">redraw-board</span> canvas)
                      (<span style="color:#66d9ef">if </span>(<span style="color:#a6e22e">logic/game-is-over?</span> <span style="color:#f92672">@</span>position)
                        (<span style="color:#a6e22e">declare-winner</span> canvas)))))))))))
    ...
</code></pre></div><p>This method still feels like there is some room for improvement, but it works for now.</p>
<p>The computer player is closely derived from the one described in Chapter 10 of &ldquo;Simply Scheme&rdquo; by Brian Harvey and Matthew Wright. The unit tests in the project consist mostly of the example function usage shown in that chapter. The book is available in several forms <a href="http://www.eecs.berkeley.edu/~bh/ssch10/ttt.html" title="Link to on-line version of Chapter 10 from Simply Scheme.">on-line</a>. It is unbeatable. If you happen to beat the game, it is undoubtedly a program bug introduced in my translation.</p>
<p>If you are interested in the complete code for the project, it is on HelixTeamHub [here](<a href="https://helixteamhub.cloud/Regolith/projects/binom-stats/repositories/tic-tac-toe/tree/default%22Link">https://helixteamhub.cloud/Regolith/projects/binom-stats/repositories/tic-tac-toe/tree/default&quot;Link</a> to Tic-Tac-Toe project repository.&quot;).</p>
  
  <h4><i class="fa-share-alt" aria-hidden="true"></i>&nbsp;Share!</h4>
<ul class="share-buttons">
	<li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fyo-dave.com%2f2013%2f05%2f08%2fclojure-javafx-and-tic-tac-toe%2f" target="_blank" title="Share on Facebook"><i class="fa-facebook" aria-hidden="true"></i><span class="sr-only">Share on Facebook</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://twitter.com/intent/tweet?source=https%3a%2f%2fyo-dave.com%2f2013%2f05%2f08%2fclojure-javafx-and-tic-tac-toe%2f&via=HorribleGeek" target="_blank" title="Tweet"><i class="fa-twitter" aria-hidden="true"></i><span class="sr-only">Tweet</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://plus.google.com/share?url=https%3a%2f%2fyo-dave.com%2f2013%2f05%2f08%2fclojure-javafx-and-tic-tac-toe%2f" target="_blank" title="Share on Google+"><i class="fa-google-plus" aria-hidden="true"></i><span class="sr-only">Share on Google+</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.tumblr.com/share?v=3&u=https%3a%2f%2fyo-dave.com%2f2013%2f05%2f08%2fclojure-javafx-and-tic-tac-toe%2f" target="_blank" title="Post to Tumblr"><i class="fa-tumblr" aria-hidden="true"></i><span class="sr-only">Post to Tumblr</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fyo-dave.com%2f2013%2f05%2f08%2fclojure-javafx-and-tic-tac-toe%2f" target="_blank" title="Pin it"><i class="fa-pinterest-p" aria-hidden="true"></i><span class="sr-only">Pin it</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.reddit.com/submit?url=https%3a%2f%2fyo-dave.com%2f2013%2f05%2f08%2fclojure-javafx-and-tic-tac-toe%2f" target="_blank" title="Submit to Reddit"><i class="fa-reddit-alien" aria-hidden="true"></i><span class="sr-only">Submit to Reddit</span></a>
	</li>
</ul>


<style>
	ul.share-buttons{
	  list-style: none;
	  padding: 0;
	}

	ul.share-buttons li{
	  display: inline;
	}

	ul.share-buttons .sr-only{
	  position: absolute;
	  clip: rect(1px 1px 1px 1px);
	  clip: rect(1px, 1px, 1px, 1px);
	  padding: 0;
	  border: 0;
	  height: 1px;
	  width: 1px;
	  overflow: hidden;
	}
</style>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://yo-dave.com/2013/05/08/styled-dialogs-in-javafx-with-jfxtras-monologfx/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://yo-dave.com/2013/05/08/styled-dialogs-in-javafx-with-jfxtras-monologfx/">Styled Dialogs in JavaFX with JFXtras MonologFX</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://yo-dave.com/2013/05/21/the-clojure-development-toolchain/">The Clojure Development Toolchain</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://yo-dave.com/2013/05/21/the-clojure-development-toolchain/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="https://yo-dave.com/js/ui.js"></script>
<script src="https://yo-dave.com/js/menus.js"></script>








</body>
</html>

