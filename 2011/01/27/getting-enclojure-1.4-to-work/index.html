<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.52" />

  <title>Getting enclojure 1.4 to work &middot; Yo-Dave</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://yo-dave.com/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://yo-dave.com/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://yo-dave.com/css/clajburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css"> 
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet"> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/clojure.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/dos.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://yo-dave.com/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <a class="pure-menu-heading" href="https://yo-dave.com/">Yo-Dave</a>
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/about/about"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://yo-dave.com/contact/contact"><i class='fa fa-phone fa-fw'></i>Contact</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href=""></a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/clartaq" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://bitbucket.org/David_Clark" target="_blank"><i class="fa fa-bitbucket-square fa-fw"></i>Bitbucket</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://stackoverflow.com/users/193509" target="_blank"><i class="fa fa-stack-overflow fa-fw"></i>Stack Overflow</a>
    </li>
    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2011-2018, David D. Clark. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Clajburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Getting enclojure 1.4 to work</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>27 Jan 2011 1:31:33 AM</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://yo-dave.com/tags/clojure">clojure</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://yo-dave.com/tags/editors">editors</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://yo-dave.com/tags/enclojure">enclojure</a>
    
  </div>
  
  

</div>

  <p>I&rsquo;ve used <a href="http://www.enclojure.org">enclojure</a> (<strong>Update 12 Mar 2018</strong>: The link is now dead.) for a long time (in internet years). It has always seemed a bit finicky. However, with the 1.4 release and the switch to using <a href="http://maven.apache.org">Maven</a> as the build tool, things stopped working. Projects that had worked fine before no longer compiled or executed. The &ldquo;Getting Started&rdquo; section of the enclojure web page appears to be hopelessly out of date and actually misleading. Here&rsquo;s what I had to do.</p>

<h2 id="building-and-running"><strong>Building and Running</strong></h2>

<p>System: NetBeans 6.9.1, enclojure 1.4, Apache Maven 2.2.1, Java jdk 1.6.0_23, Encoding Cp1252, Windows XP, 32-bit or Windows 7, 64-bit</p>

<ul>
<li>Create a new clojure 1.2 project.</li>

<li><p>Paste the source of a canonical Clojure program. I like this program because it uses Clojure, has interaction with Java, uses a macro, and generates a runnable jar using AOT compilation &ndash; or <em>should</em>.</p>

<pre><code class="language-clojure">(ns net.dneclark.JFrameDemo
  (:import (javax.swing JLabel JButton JPanel JFrame))
  (:gen-class))

;;; This is a small app to demonstrate how to create
;;; a swing-based user interface from Clojure. It is
;;; stolen almost completely from Stuart Sierra's
;;; post at stuartsierra.com/2010/01/03/doto-swing-with-clojure
    
(defmacro on-action [component event &amp;amp;amp; body]
  `(. ~component addActionListener
      (proxy [java.awt.event.ActionListener] []
        (actionPerformed [~event] ~@body))))

(defn counter-app []
  (let [counter (atom 0)
        label (JLabel. &quot;Counter: 0&quot;)
        button (doto (JButton. &quot;Add 1&quot;)
                 (on-action evnt  ;; evnt is not used
                   (.setText label
                      (str &quot;Counter: &quot; (swap! counter inc)))))
        panel (doto (JPanel.)
                (.add label)
                (.add button))]
    (doto (JFrame. &quot;Counter App&quot;)
      (.setContentPane panel)
      (.setDefaultCloseOperation JFrame/EXIT_ON_CLOSE)
      (.setSize 300 100)
      (.setVisible true))))
    
(defn -main []
  (counter-app))
</code></pre></li>

<li><p>In the project view, right-click on the project name, then select &ldquo;Properties&rdquo; from the drop-down menu.</p></li>

<li><p>In the &ldquo;Run&rdquo; branch, in the &ldquo;Main Class:&rdquo; edit box, type &ldquo;net.dneclark.JFrameDemo&rdquo;.</p></li>

<li><p>Edited project pom.xml to include 2.0.2 under the maven compiler plugin as suggested by <a href="http://groups.google.com/group/enclojure/browse_thread/thread/785bde127d006b8a/a5446ddf6e869dea?#a5446ddf6e869dea">this thread</a> from the enclojure discussion group.
For one of my systems, this is all it took. On another system, there was something funky in the Maven repository. Deleting the repository and re-building got things working.</p></li>
</ul>

<h2 id="other-tricks">Other Tricks</h2>

<p>At this point, the executable jar is called &ldquo;sample-0.0.1.jar&rdquo;, to rename it, open the project properties, change the Artifact Id to &ldquo;JFrameDemo&rdquo;. Executable jar is named &ldquo;JFrameDemo-0.0.1.jar&rdquo;.</p>

<p>This jar is not a stand-alone executable as it is typically created by NetBeans. It does not contain any of the libraries, such as the Clojure libraries.</p>

  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://yo-dave.com/2011/01/25/ideas-for-simulated-evolution/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://yo-dave.com/2011/01/25/ideas-for-simulated-evolution/">Ideas for Simulated Evolution</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://yo-dave.com/2011/01/29/a-closure-in-clojure/">A Closure in Clojure</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://yo-dave.com/2011/01/29/a-closure-in-clojure/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="https://yo-dave.com/js/ui.js"></script>






</body>
</html>

